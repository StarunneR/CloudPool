<div id="article-banner">
    <h2>文章归档</h2>
    <p class="post-date">按时间排序</p>
</div>
<main class="app-body" id="archive">
    <% let years = {}; %>
    <%
      site.posts.each(post => {
        const y = post.date.year();
        if (!years[y]) {
          years[y] = [];
        }
        years[y].push(post);
      })
    %>
    <% for (let year of Object.keys(years).reverse()) { %>
      <%- partial('_partial/archive', { year: year, posts: years[year].reverse() }) %>
    <% } %>
</main>

<script>
  (function () {
    var url = "<%= config.url %>/<%= page.path %>";
    var banner = "<%= page.banner %>";
    if (banner !== "" && banner !== "undefined" && banner !== "null") {
      $("#article-banner").css({
        "background-image": "url(" + banner + ")",
      });
    } else {
      $("#article-banner").geopattern(url);
    }
    $(".header").removeClass("fixed-header");
  })();
</script>