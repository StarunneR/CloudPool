---
title: 建站笔记
date: 2019-12-24
tags:
---

## Hexo部署.1

    建议VPN: icarus - 广东广州教育局教育网-0193

1. cd主文件夹
    npm install -g hexo-cli
    npm install
    hexo init
2.  
    git clone https://github.com/theme-next/hexo-theme-next themes/next
3.  
    .\config.yml:
    theme: landscape   -->   theme: next

## Hexo部署.2 域名设置

1. 注册（购买）域名

可用服务：

* [Porkbun](https://porkbun.com/) #自用 #廉价 #需要国际信用卡 #界面好看 #英文 #隐私保护
* [万网/阿里云](https://wanwang.aliyun.com) #老牌 #知名度高 #操作简易 #可能需要实名认证
* [新网](http://www.xinnet.com) #老牌 #知名度高 #可能需要实名认证
* [Godaddy](https://sg.godaddy.com/zh) #老牌 #知名度高

注意：域名注册首年价格往往远低于续费价格，注意区分

2. DNS相关设置  

2.1.  选择DNS解析服务商

* [CloudFlare](https://www.cloudflare.com/dns/) #功能丰富 #英文 #访问情况统计
* [DNSPod](https://console.dnspod.cn) #中文 #可能需要实名认证 

登录 - 新建 - 填写域名 - 得到DNS服务器地址

2.2.  回到域名注册商页面(1.) - 填写DNS服务器(AUTHORITATIVE NAMESERVERS) - 刷新，等待连接成功

2.3.  GitLab - Pages - New Domain - [Data] --> DNS解析服务商 - DNS设置

Example:
    CNAME:
    cloudpool.me CNAME StarunneR.gitlab.io. --> Type = CNAME; Name = cloudpool.me; Content = StarunneR.gitlab.io.
    TXT记录同理

## GitLab推送设置

    建议VPN: icarus - 上海科技网-4410

1. 登录GitLab - 新建Project

2. Git 全局设置（页面下方有说明）
    推送现有文件夹（页面下方有说明）

3. 新建文件 .\\.gitlab-ci.yml ：

<pre>
    image: node:10-alpine # use nodejs v10 LTS
    cache:
      paths:
        - node_modules/

    before_script:
      - npm install hexo-cli -g
      - npm install

    pages:
      script:
        - hexo generate
      artifacts:
        paths:
          - public
      only:
        - master
</pre>

## GitLab Commit脚本

1. 新建文件 upload.sh

<pre>
    git add .
    git commit -m "备注"
    git push origin
</pre>

2. 双击运行
